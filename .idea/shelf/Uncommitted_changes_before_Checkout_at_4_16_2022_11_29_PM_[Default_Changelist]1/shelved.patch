Index: app/src/main/java/edu/temple/audiobookplayer/BookObject.kt
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/BookObject.kt b/app/src/main/java/edu/temple/audiobookplayer/BookObject.kt
deleted file mode 100644
--- a/app/src/main/java/edu/temple/audiobookplayer/BookObject.kt	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ /dev/null	(revision 750861889d93612c1df858f13164d5c6648209ea)
@@ -1,29 +0,0 @@
-package edu.temple.audiobookplayer
-
-import android.os.Parcel
-import android.os.Parcelable
-
-data class BookObject(val title: String?, val author: String?) : Parcelable {
-    constructor(parcel: Parcel) : this(
-        parcel.readString(),
-        parcel.readString()) {
-    }
-
-    override fun writeToParcel(dest: Parcel?, flags: Int) {
-        TODO("not done")
-    }
-
-    override fun describeContents(): Int {
-        TODO("not done")
-    }
-
-    companion object CREATOR : Parcelable.Creator<BookObject> {
-        override fun createFromParcel(parcel: Parcel): BookObject {
-            return BookObject(parcel)
-        }
-
-        override fun newArray(size: Int): Array<BookObject?> {
-            return arrayOfNulls(size)
-        }
-    }
-}
\ No newline at end of file
Index: .idea/deploymentTargetDropDown.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n    <component name=\"deploymentTargetDropDown\">\r\n        <targetSelectedWithDropDown>\r\n            <Target>\r\n                <type value=\"QUICK_BOOT_TARGET\" />\r\n                <deviceKey>\r\n                    <Key>\r\n                        <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n                        <value value=\"C:\\Users\\Sam Sepial\\.android\\avd\\Pixel_4_XL_API_30.avd\" />\r\n                    </Key>\r\n                </deviceKey>\r\n            </Target>\r\n        </targetSelectedWithDropDown>\r\n        <timeTargetWasSelectedWithDropDown value=\"2022-03-22T23:43:13.880635300Z\" />\r\n    </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
--- a/.idea/deploymentTargetDropDown.xml	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/.idea/deploymentTargetDropDown.xml	(date 1650165575752)
@@ -7,11 +7,11 @@
                 <deviceKey>
                     <Key>
                         <type value="VIRTUAL_DEVICE_PATH" />
-                        <value value="C:\Users\Sam Sepial\.android\avd\Pixel_4_XL_API_30.avd" />
+                        <value value="$USER_HOME$/.android/avd/Pixel_5_API_30.avd" />
                     </Key>
                 </deviceKey>
             </Target>
         </targetSelectedWithDropDown>
-        <timeTargetWasSelectedWithDropDown value="2022-03-22T23:43:13.880635300Z" />
+        <timeTargetWasSelectedWithDropDown value="2021-11-09T05:36:27.210312Z" />
     </component>
 </project>
\ No newline at end of file
Index: app/src/main/res/layout/two_pane_layout.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/two_pane_layout.xml b/app/src/main/res/layout/two_pane_layout.xml
new file mode 100644
--- /dev/null	(date 1650164796593)
+++ b/app/src/main/res/layout/two_pane_layout.xml	(date 1650164796593)
@@ -0,0 +1,55 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent">
+
+    <androidx.fragment.app.FragmentContainerView
+        android:id="@+id/container1"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        android:layout_marginStart="4dp"
+        android:layout_marginTop="4dp"
+        android:layout_marginBottom="4dp"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/searchButton"
+        app:layout_constraintWidth_percent=".35" />
+
+    <androidx.fragment.app.FragmentContainerView
+        android:id="@+id/container2"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        android:layout_marginTop="4dp"
+        android:layout_marginEnd="4dp"
+        android:layout_marginBottom="4dp"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toEndOf="@+id/container1"
+        app:layout_constraintTop_toTopOf="parent" />
+
+    <ImageButton
+        android:id="@+id/searchButton"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="4dp"
+        android:layout_marginTop="4dp"
+        app:layout_constraintEnd_toStartOf="@+id/container2"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        app:srcCompat="@android:drawable/ic_menu_search" />
+
+    <androidx.fragment.app.FragmentContainerView
+        android:id="@+id/fragmentContainerView"
+        android:name="edu.temple.audiobookplayer.ControllerFragment"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="4dp"
+        android:layout_marginTop="4dp"
+        android:layout_marginEnd="4dp"
+        app:layout_constraintEnd_toStartOf="@+id/container2"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/searchButton" />
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/layout/activity_search.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_search.xml b/app/src/main/res/layout/activity_search.xml
new file mode 100644
--- /dev/null	(date 1650164796730)
+++ b/app/src/main/res/layout/activity_search.xml	(date 1650164796730)
@@ -0,0 +1,40 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".SearchActivity">
+
+    <EditText
+        android:id="@+id/booksearch"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginBottom="8dp"
+        android:ems="10"
+        android:hint="Search"
+        android:inputType="textPersonName"
+        app:layout_constraintBottom_toTopOf="@+id/guideline2"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="0.557"
+        app:layout_constraintStart_toStartOf="parent" />
+
+    <ImageButton
+        android:id="@+id/searchButton"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="0.523"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/booksearch"
+        app:layout_constraintVertical_bias="0.113"
+        app:srcCompat="@android:drawable/ic_menu_search" />
+
+    <androidx.constraintlayout.widget.Guideline
+        android:id="@+id/guideline2"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:orientation="horizontal"
+        app:layout_constraintGuide_percent=".4" />
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_controller.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_controller.xml b/app/src/main/res/layout/fragment_controller.xml
new file mode 100644
--- /dev/null	(date 1650164796477)
+++ b/app/src/main/res/layout/fragment_controller.xml	(date 1650164796477)
@@ -0,0 +1,61 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".ControlFragment">
+
+    <ImageButton
+        android:id="@+id/playButton"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="8dp"
+        android:layout_marginTop="16dp"
+        android:layout_marginEnd="8dp"
+        android:src="@android:drawable/ic_media_play"
+        app:layout_constraintEnd_toStartOf="@+id/pauseButton"
+        app:layout_constraintHorizontal_bias="0.0"
+        app:layout_constraintStart_toEndOf="@+id/stopButton"
+        app:layout_constraintTop_toBottomOf="@+id/nowPlayingTextView" />
+
+    <SeekBar
+        android:id="@+id/seekBar"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="8dp"
+        android:layout_marginTop="36dp"
+        android:layout_marginEnd="8dp"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="1.0"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/playButton" />
+
+    <ImageButton
+        android:id="@+id/stopButton"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="12dp"
+        android:src="@android:drawable/ic_menu_close_clear_cancel"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="@+id/playButton" />
+
+    <ImageButton
+        android:id="@+id/pauseButton"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginEnd="4dp"
+        android:src="@android:drawable/ic_media_pause"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintTop_toTopOf="@+id/playButton" />
+
+    <TextView
+        android:id="@+id/nowPlayingTextView"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:textSize="20sp"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        tools:layout_editor_absoluteY="16dp"
+        tools:text="Now Playing" />
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>plugins {\r\n    id 'com.android.application'\r\n    id 'org.jetbrains.kotlin.android'\r\n}\r\n\r\nandroid {\r\n    compileSdk 32\r\n\r\n    defaultConfig {\r\n        applicationId \"edu.temple.audiobookplayer\"\r\n        minSdk 27\r\n        targetSdk 32\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = '1.8'\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation 'androidx.core:core-ktx:1.7.0'\r\n    implementation 'androidx.appcompat:appcompat:1.4.1'\r\n    implementation 'com.google.android.material:material:1.5.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.3'\r\n    testImplementation 'junit:junit:4.13.2'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/build.gradle b/app/build.gradle
--- a/app/build.gradle	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/build.gradle	(date 1650165687374)
@@ -1,6 +1,7 @@
 plugins {
     id 'com.android.application'
-    id 'org.jetbrains.kotlin.android'
+    id 'kotlin-android'
+    id "kotlin-kapt"
 }
 
 android {
@@ -8,7 +9,7 @@
 
     defaultConfig {
         applicationId "edu.temple.audiobookplayer"
-        minSdk 27
+        minSdk 30
         targetSdk 32
         versionCode 1
         versionName "1.0"
@@ -32,11 +33,18 @@
 }
 
 dependencies {
-
     implementation 'androidx.core:core-ktx:1.7.0'
-    implementation 'androidx.appcompat:appcompat:1.4.1'
-    implementation 'com.google.android.material:material:1.5.0'
-    implementation 'androidx.constraintlayout:constraintlayout:2.1.3'
+    implementation 'androidx.appcompat:appcompat:1.3.1'
+    implementation 'com.google.android.material:material:1.4.0'
+    implementation 'androidx.constraintlayout:constraintlayout:2.1.1'
+    implementation 'androidx.legacy:legacy-support-v4:1.0.0'
+    implementation 'com.android.volley:volley:1.2.1'
+    implementation 'com.squareup.picasso:picasso:2.71828'
+    implementation 'androidx.navigation:navigation-fragment-ktx:2.3.5'
+    implementation 'androidx.navigation:navigation-ui-ktx:2.3.5'
+    implementation files('sampledata/audlib-player.aar')
+    implementation files('libs/audlib-player.aar')
+    implementation files('sampledata/audlib-player.aar')
     testImplementation 'junit:junit:4.13.2'
     androidTestImplementation 'androidx.test.ext:junit:1.1.3'
     androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'
Index: app/src/main/java/edu/temple/audiobookplayer/BookDetailsFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.temple.audiobookplayer\r\n\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.TextView\r\nimport androidx.lifecycle.ViewModelProvider\r\n\r\nclass BookDetailsFragment : Fragment() {\r\n    lateinit var bookViewModel: BookViewModel\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        bookViewModel = ViewModelProvider(requireActivity()).get(BookViewModel::class.java)\r\n    }\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        return inflater.inflate(R.layout.fragment_book_details, container, false)\r\n    }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        bookViewModel.getSelectedBook().observe(requireActivity()){\r\n            val titleTxt = view?.findViewById<TextView>(R.id.bigTitle)\r\n            val authorTxt = view?.findViewById<TextView>(R.id.bigAuthor)\r\n            titleTxt.setText(it.title)\r\n            authorTxt.setText(it.author)\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/BookDetailsFragment.kt b/app/src/main/java/edu/temple/audiobookplayer/BookDetailsFragment.kt
--- a/app/src/main/java/edu/temple/audiobookplayer/BookDetailsFragment.kt	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/java/edu/temple/audiobookplayer/BookDetailsFragment.kt	(date 1650164796368)
@@ -5,31 +5,42 @@
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
+import android.widget.ImageView
 import android.widget.TextView
 import androidx.lifecycle.ViewModelProvider
+import com.squareup.picasso.Picasso
 
 class BookDetailsFragment : Fragment() {
-    lateinit var bookViewModel: BookViewModel
-    override fun onCreate(savedInstanceState: Bundle?) {
-        super.onCreate(savedInstanceState)
-
-        bookViewModel = ViewModelProvider(requireActivity()).get(BookViewModel::class.java)
-    }
-
+    private lateinit var coverOfBook:ImageView
+    private lateinit var titleOfBook:TextView
+    private lateinit var authorOfBook:TextView
     override fun onCreateView(
         inflater: LayoutInflater, container: ViewGroup?,
         savedInstanceState: Bundle?
     ): View? {
-        return inflater.inflate(R.layout.fragment_book_details, container, false)
+        // Inflate the layout for this fragment
+        val view = inflater.inflate(R.layout.fragment_book_details, container, false)
+        //Get the view from the layout to wire up
+        coverOfBook = view.findViewById<ImageView>(R.id.bookCover)
+        authorOfBook= view.findViewById<TextView>(R.id.authDet)
+        titleOfBook = view.findViewById<TextView>(R.id.titleDet)
+
+        return view
     }
 
+    //Once the view is created this allows for the book to be changed by calling the changeBook function
     override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
         super.onViewCreated(view, savedInstanceState)
-        bookViewModel.getSelectedBook().observe(requireActivity()){
-            val titleTxt = view?.findViewById<TextView>(R.id.bigTitle)
-            val authorTxt = view?.findViewById<TextView>(R.id.bigAuthor)
-            titleTxt.setText(it.title)
-            authorTxt.setText(it.author)
+        ViewModelProvider(requireActivity()).get(bookViewModel::class.java).getBook().observe(requireActivity(), {
+            changeBook(it)
+        })
+    }
+
+    private fun changeBook(book: Book?){
+        book?.run {
+            titleOfBook.text=title
+            authorOfBook.text = author
+            Picasso.get().load(coverURL).into(coverOfBook)
         }
     }
 }
\ No newline at end of file
Index: app/src/main/java/edu/temple/audiobookplayer/CustomAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/CustomAdapter.kt b/app/src/main/java/edu/temple/audiobookplayer/CustomAdapter.kt
new file mode 100644
--- /dev/null	(date 1650165817246)
+++ b/app/src/main/java/edu/temple/audiobookplayer/CustomAdapter.kt	(date 1650165817246)
@@ -0,0 +1,40 @@
+package edu.temple.audiobookplayer
+
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import android.widget.TextView
+import androidx.recyclerview.widget.RecyclerView
+
+class CustomAdapter(listofBooks: BookList, clicked: (Book)->Unit): RecyclerView.Adapter<CustomAdapter.ViewHolder>(){
+    val list = listofBooks
+    val clicked = clicked
+
+    class ViewHolder(itemView: View, clicked: (Book)->Unit): RecyclerView.ViewHolder(itemView){
+        lateinit var Book:Book
+        var title: TextView = itemView.findViewById(R.id.Booktitle)
+        var author: TextView = itemView.findViewById(R.id.BookAuthor)
+        init{
+            title = itemView.findViewById(R.id.Booktitle)
+            author= itemView.findViewById(R.id.BookAuthor)
+            title.setOnClickListener {
+                clicked(Book)
+            }
+        }
+    }
+
+    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
+        return ViewHolder(LayoutInflater.from(parent.context).inflate(R.layout.book, parent, false), clicked)
+    }
+
+    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
+        //gets the position that was clicked from the list to give to the book class
+        holder.author.text=list[position]?.title
+        holder.title.text= list[position]?.author
+        holder.Book= list.get(position)!!
+    }//end of onBind
+
+    override fun getItemCount(): Int {
+        return list.size()
+    }
+}
\ No newline at end of file
Index: app/src/main/java/edu/temple/audiobookplayer/MainActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.temple.audiobookplayer\r\n\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.view.View\r\nimport androidx.lifecycle.ViewModelProvider\r\n\r\nclass MainActivity : AppCompatActivity(), BookListFragment.BookListFragmentInterface {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n        val title = resources.getStringArray(R.array.title)\r\n        val author = resources.getStringArray(R.array.author)\r\n        val bookList = BookList()\r\n        for(i in 0..9){\r\n            bookList.add(BookObject(title[i],author[i]))\r\n        }\r\n        val fragment = supportFragmentManager.findFragmentById(R.id.container1)\r\n        if(fragment != null)\r\n            supportFragmentManager.beginTransaction().remove(fragment).commit()\r\n        supportFragmentManager\r\n            .beginTransaction()\r\n            .add(R.id.container1, BookListFragment.newInstance(bookList))\r\n            .commit()\r\n\r\n    }\r\n\r\n    override fun bookSelected() {\r\n        if(findViewById<View>(R.id.container2) == null)\r\n            supportFragmentManager\r\n                .beginTransaction()\r\n                .replace(R.id.container1,BookDetailsFragment())\r\n                .addToBackStack(null)\r\n                .commit()\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/MainActivity.kt b/app/src/main/java/edu/temple/audiobookplayer/MainActivity.kt
--- a/app/src/main/java/edu/temple/audiobookplayer/MainActivity.kt	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/java/edu/temple/audiobookplayer/MainActivity.kt	(date 1650166127142)
@@ -1,38 +1,171 @@
 package edu.temple.audiobookplayer
 
+import android.content.ComponentName
+import android.content.Intent
+import android.content.ServiceConnection
+import android.os.*
+import android.util.Log
 import androidx.appcompat.app.AppCompatActivity
-import android.os.Bundle
 import android.view.View
+import android.widget.ImageButton
+import androidx.activity.result.contract.ActivityResultContracts
 import androidx.lifecycle.ViewModelProvider
+import com.android.volley.toolbox.JsonObjectRequest
+import com.android.volley.toolbox.Volley
+import edu.temple.audlibplayer.PlayerService
+import com.android.volley.Request
+
+
+class MainActivity : AppCompatActivity() , BookListFragment.BookSelectedInterface, ControllerFragment.ControllerInterface{
+
+    //intializing everything
+    private lateinit var bookListFragment: BookListFragment
+    private lateinit var mediaControlBinder: PlayerService.MediaControlBinder
+    private var connected = false
+    private val isSingleContainer : Boolean by lazy{
+        findViewById<View>(R.id.container2) == null
+    }
+
+    private val selectedBookViewModel : bookViewModel by lazy {
+        ViewModelProvider(this).get(bookViewModel::class.java)
+    }
+    private val playingBookViewModel : PlayingBookViewModel by lazy {
+        ViewModelProvider(this).get(PlayingBookViewModel::class.java)
+    }
+
+    private val bookListViewModel : BookList by lazy {
+        ViewModelProvider(this).get(BookList::class.java)
+    }
+    companion object {
+        const val BOOKLISTFRAGMENT_KEY = "BookListFragment"
+    }
+    //done intialization
+
+    val audioBookHandler = Handler(Looper.getMainLooper()){ msg ->
+        msg.obj?.let { msgObj ->
+            val bookProgress = msgObj as PlayerService.BookProgress
+            if(playingBookViewModel.getBookPlaying().value == null){
+                Volley.newRequestQueue(this)
+                    .add(JsonObjectRequest(Request.Method.GET,API.getBookDataUrl(bookProgress.bookId),null,{ jsonObject ->
+                        playingBookViewModel.setBookPlaying(Book(jsonObject))
+                        if( selectedBookViewModel.getBook().value==null){
+                            selectedBookViewModel.setSelectedBook(playingBookViewModel.getBookPlaying().value)
+                            bookSelected()
+                        }
+                    },{}))
+            }
+            supportFragmentManager.findFragmentById(R.id.controlFragmentContainerView)?.run{
+                with(this as ControllerFragment){
+                    playingBookViewModel.getBookPlaying().value?.also{
+                        setPlayProgress(((bookProgress.progress/it.duration.toFloat())*100).toInt())
+                    }
+                }
+            }
+        }//end of msg
+        true
+    }//end of handler
+
+    private val searchRequest = registerForActivityResult(ActivityResultContracts.StartActivityForResult()){
+        supportFragmentManager.popBackStack()
+        it.data?.run {
+            bookListViewModel.copyBooks(getSerializableExtra(BookList.BOOKLIST_KEY)as BookList)
+            bookListFragment.bookListUpdated()
+        }
+    }//end of searchRequest`
 
-class MainActivity : AppCompatActivity(), BookListFragment.BookListFragmentInterface {
+    private val serviceConnect = object : ServiceConnection {
+        override fun onServiceConnected(name: ComponentName?, service: IBinder?) {
+            mediaControlBinder = service as PlayerService.MediaControlBinder
+            mediaControlBinder.setProgressHandler(audioBookHandler)
+            connected = true
+        }//end of CONNECTED
+        override fun onServiceDisconnected(name: ComponentName?) {
+            connected=false
+        }//end of DISCONNECTED
+    }//end of service connect
+
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
         setContentView(R.layout.activity_main)
-        val title = resources.getStringArray(R.array.title)
-        val author = resources.getStringArray(R.array.author)
-        val bookList = BookList()
-        for(i in 0..9){
-            bookList.add(BookObject(title[i],author[i]))
+
+        playingBookViewModel.getBookPlaying().observe(this,{
+            (supportFragmentManager.findFragmentById(R.id.controlFragmentContainerView) as ControllerFragment).setNowPlaying(it.title)
+        })
+
+        // If we're switching from one container to two containers
+        // clear BookDetailsFragment from container1
+        if(supportFragmentManager.findFragmentById(R.id.container1) is BookDetailsFragment
+            && selectedBookViewModel.getBook().value!=null){
+            supportFragmentManager.popBackStack()
         }
-        val fragment = supportFragmentManager.findFragmentById(R.id.container1)
-        if(fragment != null)
-            supportFragmentManager.beginTransaction().remove(fragment).commit()
-        supportFragmentManager
-            .beginTransaction()
-            .add(R.id.container1, BookListFragment.newInstance(bookList))
-            .commit()
+
+        if(savedInstanceState ==null){
+            bookListFragment= BookListFragment()
+            supportFragmentManager.beginTransaction()
+                .add(R.id.container1,bookListFragment, BOOKLISTFRAGMENT_KEY)
+                .commit()
+        }else{
+            bookListFragment=supportFragmentManager.findFragmentByTag(BOOKLISTFRAGMENT_KEY) as BookListFragment
+            if(isSingleContainer&&selectedBookViewModel.getBook().value!=null){
+                supportFragmentManager.beginTransaction()
+                    .replace(R.id.container1, BookDetailsFragment())
+                    .setReorderingAllowed(true)
+                    .addToBackStack(null)
+                    .commit()
+            }
+        }
+
+        if(!isSingleContainer&& supportFragmentManager.findFragmentById(R.id.container2) !is BookDetailsFragment)
+            supportFragmentManager.beginTransaction()
+                .add(R.id.container2,BookDetailsFragment())
+                .commit()
+        findViewById<ImageButton>(R.id.searchButton).setOnClickListener{
+            searchRequest.launch(Intent(this, SearchActivity::class.java))
+        }//end of portrait mode
 
+        bindService(Intent(this, PlayerService::class.java)
+            , serviceConnect
+            , BIND_AUTO_CREATE
+        )//end of bind service
+
+    }
+
+    override fun onBackPressed() {
+        selectedBookViewModel.setSelectedBook(null)
+        super.onBackPressed()
     }
 
-    override fun bookSelected() {
-        if(findViewById<View>(R.id.container2) == null)
-            supportFragmentManager
-                .beginTransaction()
+    override fun bookSelected(){
+        if(isSingleContainer){
+            supportFragmentManager.beginTransaction()
                 .replace(R.id.container1,BookDetailsFragment())
+                .setReorderingAllowed(true)
                 .addToBackStack(null)
                 .commit()
+        }
     }
+
+    override fun play() {
+        if(connected && selectedBookViewModel.getBook().value!=null){
+            Log.d("Button pressed", "Play button")
+            mediaControlBinder.play(selectedBookViewModel.getBook().value!!.id)
+            playingBookViewModel.setBookPlaying(selectedBookViewModel.getBook().value)
+            startService(Intent(this, PlayerService::class.java))
+        }
+    }
 
+    override fun pause() {
+        if(connected) mediaControlBinder.pause()
+    }
 
+    override fun stop() {
+        if(connected) mediaControlBinder.stop()
+        stopService(Intent(this, PlayerService::class.java))
+    }
+
+    override fun seek(position: Int) {
+        if(connected &&mediaControlBinder.isPlaying) mediaControlBinder
+            .seekTo((playingBookViewModel
+                .getBookPlaying().value!!.duration*(position.toFloat()/100)).toInt())
+    }
 }
\ No newline at end of file
Index: app/src/main/java/edu/temple/audiobookplayer/BookList.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.temple.audiobookplayer\r\n\r\nclass BookList {\r\n    val list = arrayListOf<BookObject>()\r\n    fun add(book : BookObject){\r\n        list.add(book)\r\n    }\r\n\r\n    fun remove(book : BookObject){\r\n        list.remove(book)\r\n    }\r\n\r\n    operator fun get(index : Int) : BookObject{\r\n        return list.get(index)\r\n    }\r\n\r\n    fun size() : Int{\r\n        return list.size\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/BookList.kt b/app/src/main/java/edu/temple/audiobookplayer/BookList.kt
--- a/app/src/main/java/edu/temple/audiobookplayer/BookList.kt	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/java/edu/temple/audiobookplayer/BookList.kt	(date 1650164796392)
@@ -1,20 +1,34 @@
 package edu.temple.audiobookplayer
 
-class BookList {
-    val list = arrayListOf<BookObject>()
-    fun add(book : BookObject){
-        list.add(book)
+import androidx.lifecycle.ViewModel
+import org.json.JSONArray
+import java.io.Serializable
+
+class BookList : ViewModel(),Serializable{
+    companion object{
+        val BOOKLIST_KEY = "Booklist"
+    }
+    private val bookList : ArrayList<Book> by lazy {
+        ArrayList()
     }
 
-    fun remove(book : BookObject){
-        list.remove(book)
+    fun add(book: Book) {
+        bookList.add(book)
     }
 
-    operator fun get(index : Int) : BookObject{
-        return list.get(index)
+    fun clearBooks(){
+        bookList.clear()
     }
 
-    fun size() : Int{
-        return list.size
+    fun populateBooks (books: JSONArray) {
+        for (j in 0 until books.length()) {
+            bookList.add(Book(books.getJSONObject(j)))
+        }
     }
+    fun copyBooks(newBooks: BookList){
+        bookList.clear()
+        bookList.addAll(newBooks.bookList)
+    }
+    operator fun get(index: Int) = bookList.get(index)
+    fun size() = bookList.size
 }
\ No newline at end of file
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout-land/activity_main.xml\" value=\"0.21516754850088182\" />\r\n        <entry key=\"..\\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/activity_main.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/book_list_layout.xml\" value=\"0.11302083333333333\" />\r\n        <entry key=\"..\\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/card_layout.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/display_layout.xml\" value=\"0.22826086956521738\" />\r\n        <entry key=\"..\\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/fragment_book_details.xml\" value=\"0.11302083333333333\" />\r\n        <entry key=\"..\\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/fragment_book_list.xml\" value=\"0.11302083333333333\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"Android Studio default JDK\" project-jdk-type=\"JavaSDK\" />\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/.idea/misc.xml	(date 1650164798011)
@@ -10,6 +10,7 @@
         <entry key="..\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/display_layout.xml" value="0.22826086956521738" />
         <entry key="..\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/fragment_book_details.xml" value="0.11302083333333333" />
         <entry key="..\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/fragment_book_list.xml" value="0.11302083333333333" />
+        <entry key="..\:/Users/tngo5/AndroidStudioProjects/AudioBookPlayer/app/src/main/res/layout/fragment_controller.xml" value="0.1" />
       </map>
     </option>
   </component>
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"VcsDirectoryMappings\">\r\n    <mapping directory=\"$PROJECT_DIR$\" vcs=\"Git\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/vcs.xml b/.idea/vcs.xml
--- a/.idea/vcs.xml	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/.idea/vcs.xml	(date 1650165490001)
@@ -2,5 +2,6 @@
 <project version="4">
   <component name="VcsDirectoryMappings">
     <mapping directory="$PROJECT_DIR$" vcs="Git" />
+    <mapping directory="$PROJECT_DIR$/AudioBB" vcs="Git" />
   </component>
 </project>
\ No newline at end of file
Index: app/src/main/res/layout/book_list_layout.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/book_list_layout.xml b/app/src/main/res/layout/book.xml
rename from app/src/main/res/layout/book_list_layout.xml
rename to app/src/main/res/layout/book.xml
--- a/app/src/main/res/layout/book_list_layout.xml	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/res/layout/book.xml	(date 1650164796442)
@@ -1,28 +1,22 @@
 <?xml version="1.0" encoding="utf-8"?>
-<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
-    android:layout_height="200dp">
+    android:layout_height="wrap_content"
+    android:orientation="vertical">
 
     <TextView
-        android:id="@+id/titleText"
-        android:layout_width="245dp"
+        android:id="@+id/Booktitle"
+        android:layout_width="match_parent"
         android:layout_height="wrap_content"
-        android:textAlignment="center"
-        android:textSize="30dp"
-        app:layout_constraintBottom_toBottomOf="parent"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toTopOf="parent" />
+        android:textSize="24sp"
+        android:typeface="serif"
+        tools:text="Title" />
 
     <TextView
-        android:id="@+id/authorText"
-        android:layout_width="wrap_content"
+        android:id="@+id/BookAuthor"
+        android:layout_width="match_parent"
         android:layout_height="wrap_content"
-        app:layout_constraintBottom_toBottomOf="parent"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/titleText"
-        app:layout_constraintVertical_bias="0.24000001" />
-</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
+        android:textSize="16sp"
+        tools:text="author" />
+</LinearLayout>
\ No newline at end of file
Index: app/src/main/res/layout/activity_main.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".MainActivity\">\r\n\r\n    <androidx.fragment.app.FragmentContainerView\r\n        android:id=\"@+id/container1\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n</androidx.constraintlayout.widget.ConstraintLayout>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_main.xml b/app/src/main/res/layout/activity_main.xml
--- a/app/src/main/res/layout/activity_main.xml	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/res/layout/activity_main.xml	(date 1650164796376)
@@ -10,8 +10,37 @@
         android:id="@+id/container1"
         android:layout_width="0dp"
         android:layout_height="0dp"
+        android:layout_marginStart="4dp"
+        android:layout_marginTop="8dp"
+        android:layout_marginEnd="4dp"
+        android:layout_marginBottom="4dp"
         app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/controlFragmentContainerView" />
+
+    <ImageButton
+        android:id="@+id/searchButton"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="4dp"
+        android:layout_marginTop="4dp"
+        android:layout_marginEnd="4dp"
+        android:src="@android:drawable/ic_menu_search"
         app:layout_constraintEnd_toEndOf="parent"
         app:layout_constraintStart_toStartOf="parent"
         app:layout_constraintTop_toTopOf="parent" />
+
+    <androidx.fragment.app.FragmentContainerView
+        android:id="@+id/controlFragmentContainerView"
+        android:name="edu.temple.audiobookplayer.ControllerFragment"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="4dp"
+        android:layout_marginTop="4dp"
+        android:layout_marginEnd="4dp"
+        app:layout_constraintEnd_toEndOf="@+id/searchButton"
+        app:layout_constraintStart_toStartOf="@+id/searchButton"
+        app:layout_constraintTop_toBottomOf="@+id/searchButton" />
+
 </androidx.constraintlayout.widget.ConstraintLayout>
Index: app/src/main/java/edu/temple/audiobookplayer/BookListFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.temple.audiobookplayer\r\n\r\nimport android.content.Context\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.TextView\r\nimport androidx.lifecycle.ViewModelProvider\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport androidx.recyclerview.widget.RecyclerView\r\n\r\nprivate const val BookListKey = \"param1\"\r\n\r\nclass BookListFragment : Fragment() {\r\n    private var bookList: ArrayList<BookObject>? = null\r\n    private lateinit var bookViewModel: BookViewModel\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        bookViewModel = ViewModelProvider(requireActivity()).get(BookViewModel::class.java)\r\n        arguments?.let {\r\n            bookList = it.getParcelableArrayList<BookObject>(BookListKey);\r\n        }\r\n    }\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        return inflater.inflate(R.layout.fragment_book_list, container, false) as RecyclerView\r\n    }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        with(view as RecyclerView){\r\n            bookList?.run {\r\n                val clickEvent = {\r\n                        book : BookObject -> bookViewModel.setSelectedBook(book)\r\n                    (requireActivity() as BookListFragmentInterface).bookSelected()\r\n                }\r\n                layoutManager = LinearLayoutManager(requireContext())\r\n                adapter = BookAdapter(this,clickEvent)\r\n            }\r\n        }\r\n    }\r\n\r\n    class BookAdapter(_books : ArrayList<BookObject>, _clickEvent : (BookObject) -> Unit) : RecyclerView.Adapter<BookAdapter.BookViewHolder>(){\r\n\r\n        val books = _books\r\n        val clickEvent = _clickEvent\r\n\r\n        class BookViewHolder(_view : View) : RecyclerView.ViewHolder(_view){\r\n            val view = _view\r\n            val titleTxt = _view.findViewById<TextView>(R.id.titleText)\r\n            val authorTxt = _view.findViewById<TextView>(R.id.authorText)\r\n        }\r\n\r\n        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BookViewHolder {\r\n            return BookViewHolder(\r\n                LayoutInflater.from(parent.context)\r\n                    .inflate(R.layout.book_list_layout, parent, false)\r\n            )\r\n        }\r\n\r\n        override fun onBindViewHolder(holder: BookViewHolder, position: Int) {\r\n            holder.titleTxt.text = books[position].title\r\n            holder.authorTxt.text = books[position].author\r\n            holder.view.setOnClickListener{clickEvent(books[position])}\r\n        }\r\n\r\n        override fun getItemCount(): Int {\r\n            return books.size\r\n        }\r\n    }\r\n\r\n    companion object {\r\n        fun newInstance(bookList: BookList) =\r\n            BookListFragment().apply {\r\n                arguments = Bundle().apply {\r\n                    putParcelableArrayList(BookListKey, bookList.list)\r\n                }\r\n            }\r\n    }\r\n\r\n    interface BookListFragmentInterface {\r\n        fun bookSelected()\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/BookListFragment.kt b/app/src/main/java/edu/temple/audiobookplayer/BookListFragment.kt
--- a/app/src/main/java/edu/temple/audiobookplayer/BookListFragment.kt	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/java/edu/temple/audiobookplayer/BookListFragment.kt	(date 1650164796524)
@@ -1,90 +1,58 @@
 package edu.temple.audiobookplayer
 
-import android.content.Context
 import android.os.Bundle
 import androidx.fragment.app.Fragment
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
-import android.widget.TextView
 import androidx.lifecycle.ViewModelProvider
 import androidx.recyclerview.widget.LinearLayoutManager
 import androidx.recyclerview.widget.RecyclerView
 
-private const val BookListKey = "param1"
+private const val BOOK_LIST = "booklist"
 
 class BookListFragment : Fragment() {
-    private var bookList: ArrayList<BookObject>? = null
-    private lateinit var bookViewModel: BookViewModel
-    override fun onCreate(savedInstanceState: Bundle?) {
-        super.onCreate(savedInstanceState)
-        bookViewModel = ViewModelProvider(requireActivity()).get(BookViewModel::class.java)
-        arguments?.let {
-            bookList = it.getParcelableArrayList<BookObject>(BookListKey);
-        }
+    private val bookList: BookList by lazy {
+        ViewModelProvider(requireActivity()).get(BookList::class.java)
     }
 
     override fun onCreateView(
-        inflater: LayoutInflater, container: ViewGroup?,
-        savedInstanceState: Bundle?
+        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
     ): View? {
-        return inflater.inflate(R.layout.fragment_book_list, container, false) as RecyclerView
-    }
+        // Inflate the booklistfragment layout
+        return inflater.inflate(R.layout.fragment_book_list,container,false)
+    }//end of view
 
     override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
         super.onViewCreated(view, savedInstanceState)
-        with(view as RecyclerView){
-            bookList?.run {
-                val clickEvent = {
-                        book : BookObject -> bookViewModel.setSelectedBook(book)
-                    (requireActivity() as BookListFragmentInterface).bookSelected()
-                }
-                layoutManager = LinearLayoutManager(requireContext())
-                adapter = BookAdapter(this,clickEvent)
-            }
-        }
-    }
-
-    class BookAdapter(_books : ArrayList<BookObject>, _clickEvent : (BookObject) -> Unit) : RecyclerView.Adapter<BookAdapter.BookViewHolder>(){
-
-        val books = _books
-        val clickEvent = _clickEvent
-
-        class BookViewHolder(_view : View) : RecyclerView.ViewHolder(_view){
-            val view = _view
-            val titleTxt = _view.findViewById<TextView>(R.id.titleText)
-            val authorTxt = _view.findViewById<TextView>(R.id.authorText)
-        }
-
-        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BookViewHolder {
-            return BookViewHolder(
-                LayoutInflater.from(parent.context)
-                    .inflate(R.layout.book_list_layout, parent, false)
-            )
-        }
-
-        override fun onBindViewHolder(holder: BookViewHolder, position: Int) {
-            holder.titleTxt.text = books[position].title
-            holder.authorTxt.text = books[position].author
-            holder.view.setOnClickListener{clickEvent(books[position])}
+        val bookViewModel = ViewModelProvider(requireActivity()).get(bookViewModel::class.java)
+        val clicked:(Book)->Unit={
+                book: Book ->  bookViewModel.setSelectedBook(book)
+            (activity as BookSelectedInterface).bookSelected()
+        }
+        with( view as RecyclerView){
+            layoutManager = LinearLayoutManager(requireActivity())
+            adapter=CustomAdapter(bookList,clicked)
         }
+    }//end of onViewCreated
 
-        override fun getItemCount(): Int {
-            return books.size
+    fun bookListUpdated(){
+        view?.apply{
+            (this as RecyclerView).adapter?.notifyDataSetChanged()
         }
-    }
+    }//end of bookListUpdated
 
-    companion object {
-        fun newInstance(bookList: BookList) =
-            BookListFragment().apply {
-                arguments = Bundle().apply {
-                    putParcelableArrayList(BookListKey, bookList.list)
+    companion object{
+        @JvmStatic
+        fun newInstance(bookList: BookList)=
+            BookListFragment().apply{
+                arguments = Bundle().apply{
+                    putSerializable(BOOK_LIST,bookList)
                 }
             }
     }
 
-    interface BookListFragmentInterface {
+    interface BookSelectedInterface {
         fun bookSelected()
     }
-
 }
\ No newline at end of file
Index: app/src/main/java/edu/temple/audiobookplayer/BookViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package edu.temple.audiobookplayer\r\n\r\nimport androidx.lifecycle.LiveData\r\nimport androidx.lifecycle.MutableLiveData\r\nimport androidx.lifecycle.ViewModel\r\n\r\nclass BookViewModel : ViewModel(){\r\n\r\n    val selectedBookObject : MutableLiveData<BookObject> by lazy{\r\n        MutableLiveData<BookObject>()\r\n    }\r\n\r\n    fun setSelectedBook(book : BookObject){\r\n        selectedBookObject.value = book\r\n    }\r\n\r\n    fun getSelectedBook() : LiveData<BookObject>{\r\n        return selectedBookObject\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/BookViewModel.kt b/app/src/main/java/edu/temple/audiobookplayer/BookViewModel.kt
--- a/app/src/main/java/edu/temple/audiobookplayer/BookViewModel.kt	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/java/edu/temple/audiobookplayer/BookViewModel.kt	(date 1650164796384)
@@ -1,21 +1,22 @@
 package edu.temple.audiobookplayer
 
+
 import androidx.lifecycle.LiveData
 import androidx.lifecycle.MutableLiveData
 import androidx.lifecycle.ViewModel
+import edu.temple.audlibplayer.PlayerService
 
-class BookViewModel : ViewModel(){
+class bookViewModel: ViewModel() {
 
-    val selectedBookObject : MutableLiveData<BookObject> by lazy{
-        MutableLiveData<BookObject>()
+    private val book: MutableLiveData<Book> by lazy {
+        MutableLiveData()
     }
 
-    fun setSelectedBook(book : BookObject){
-        selectedBookObject.value = book
+    fun getBook(): LiveData<Book> {
+        return book
     }
 
-    fun getSelectedBook() : LiveData<BookObject>{
-        return selectedBookObject
+    fun setSelectedBook(item: Book?) {
+        this.book.value = item
     }
-
-}
\ No newline at end of file
+}
Index: build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nplugins {\r\n    id 'com.android.application' version '7.1.0' apply false\r\n    id 'com.android.library' version '7.1.0' apply false\r\n    id 'org.jetbrains.kotlin.android' version '1.5.30' apply false\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/build.gradle b/build.gradle
--- a/build.gradle	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/build.gradle	(date 1650165301310)
@@ -1,8 +1,13 @@
 // Top-level build file where you can add configuration options common to all sub-projects/modules.
-plugins {
-    id 'com.android.application' version '7.1.0' apply false
-    id 'com.android.library' version '7.1.0' apply false
-    id 'org.jetbrains.kotlin.android' version '1.5.30' apply false
+buildscript {
+    repositories {
+        google()
+        mavenCentral()
+    }
+    dependencies {
+        classpath 'com.android.tools.build:gradle:7.1.2'
+        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.5.31"
+    }
 }
 
 task clean(type: Delete) {
Index: app/src/main/res/layout/fragment_book_details.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    tools:context=\".BookDetailsFragment\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/bigTitle\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:textAlignment=\"center\"\r\n        android:textSize=\"60sp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/bigAuthor\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:textAlignment=\"center\"\r\n        android:textSize=\"20sp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.498\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/bigTitle\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_book_details.xml b/app/src/main/res/layout/fragment_book_details.xml
--- a/app/src/main/res/layout/fragment_book_details.xml	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/res/layout/fragment_book_details.xml	(date 1650164796752)
@@ -3,29 +3,51 @@
     xmlns:app="http://schemas.android.com/apk/res-auto"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
-    android:layout_height="wrap_content"
-    tools:context=".BookDetailsFragment">
+    android:layout_height="match_parent"
+    tools:context=".BookDetailsFragment"
+    >
 
     <TextView
-        android:id="@+id/bigTitle"
-        android:layout_width="0dp"
-        android:layout_height="wrap_content"
+        android:id="@+id/authDet"
+        android:layout_width="241dp"
+        android:layout_height="38dp"
+        android:layout_marginTop="25dp"
+        android:layout_marginBottom="75dp"
+        android:text="TextView"
         android:textAlignment="center"
-        android:textSize="60sp"
+        android:textSize="18sp"
+        android:textStyle="italic"
         app:layout_constraintBottom_toBottomOf="parent"
         app:layout_constraintEnd_toEndOf="parent"
         app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toTopOf="parent" />
+        app:layout_constraintTop_toBottomOf="@+id/titleDet" />
 
     <TextView
-        android:id="@+id/bigAuthor"
+        android:id="@+id/titleDet"
+        android:layout_width="367dp"
+        android:layout_height="69dp"
+        android:layout_marginStart="50dp"
+        android:layout_marginEnd="50dp"
+        android:textAlignment="center"
+        android:textSize="24sp"
+        android:textStyle="bold"
+        app:layout_constraintBottom_toTopOf="@+id/authDet"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="0.459"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/bookCover" />
+
+    <ImageView
+        android:id="@+id/bookCover"
         android:layout_width="0dp"
-        android:layout_height="wrap_content"
-        android:textAlignment="center"
-        android:textSize="20sp"
+        android:layout_height="0dp"
+        android:layout_marginStart="25dp"
+        android:layout_marginTop="25dp"
+        android:layout_marginEnd="25dp"
+        android:layout_marginBottom="25dp"
+        app:layout_constraintBottom_toTopOf="@+id/titleDet"
         app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintHorizontal_bias="0.498"
         app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/bigTitle" />
-
+        app:layout_constraintTop_toTopOf="parent"
+        tools:src="@tools:sample/avatars" />
 </androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_book_list.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.recyclerview.widget.RecyclerView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".BookListFragment\"/>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_book_list.xml b/app/src/main/res/layout/fragment_book_list.xml
--- a/app/src/main/res/layout/fragment_book_list.xml	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/res/layout/fragment_book_list.xml	(date 1650164796408)
@@ -1,6 +1,7 @@
 <?xml version="1.0" encoding="utf-8"?>
+
 <androidx.recyclerview.widget.RecyclerView xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
-    tools:context=".BookListFragment"/>
\ No newline at end of file
+    tools:context=".BookListFragment" />
\ No newline at end of file
Index: app/src/main/java/edu/temple/audiobookplayer/ControllerFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/ControllerFragment.kt b/app/src/main/java/edu/temple/audiobookplayer/ControllerFragment.kt
new file mode 100644
--- /dev/null	(date 1650164796460)
+++ b/app/src/main/java/edu/temple/audiobookplayer/ControllerFragment.kt	(date 1650164796460)
@@ -0,0 +1,71 @@
+package edu.temple.audiobookplayer
+
+import android.os.Bundle
+import androidx.fragment.app.Fragment
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import android.widget.ImageButton
+import android.widget.ImageView
+import android.widget.SeekBar
+import android.widget.TextView
+
+class ControllerFragment : Fragment() {
+
+    lateinit var playButton: ImageButton
+    lateinit var pauseButton: ImageButton
+    lateinit var stopButton: ImageView
+    var seekBar: SeekBar? = null
+    var nowPlayingTextView: TextView? = null
+
+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,savedInstanceState: Bundle?): View {
+        val layout =  inflater.inflate(R.layout.fragment_controller, container, false)
+        playButton = layout.findViewById(R.id.playButton)
+        pauseButton = layout.findViewById(R.id.pauseButton)
+        stopButton = layout.findViewById(R.id.stopButton)
+        seekBar = layout.findViewById(R.id.seekBar)
+        nowPlayingTextView = layout.findViewById(R.id.nowPlayingTextView)
+
+        seekBar?.setOnSeekBarChangeListener(object: SeekBar.OnSeekBarChangeListener{
+            override fun onProgressChanged(seekBar: SeekBar?, progress: Int, fromUser: Boolean) {
+                if (fromUser) {
+                    (activity as ControllerInterface).seek(progress)
+                }//end of if
+            }
+            override fun onStartTrackingTouch(seekBar: SeekBar?) {
+            }
+            override fun onStopTrackingTouch(seekBar: SeekBar?) {
+            }
+        })
+
+        val onClickListener = View.OnClickListener {
+            var parent = activity as ControllerInterface
+            when(it.id){
+                R.id.playButton -> parent.play()
+                R.id.pauseButton -> parent.pause()
+                R.id.stopButton -> parent.stop()
+            }
+        }
+
+        //this is where the click of each button is made
+        playButton.setOnClickListener(onClickListener)
+        pauseButton.setOnClickListener(onClickListener)
+        stopButton.setOnClickListener(onClickListener)
+        return layout
+    }
+
+    fun setNowPlaying(title: String){
+        nowPlayingTextView?.text = title
+    }
+
+    fun setPlayProgress(progress : Int){
+        seekBar?.setProgress(progress, true)
+    }
+
+    interface ControllerInterface{
+        fun play()
+        fun pause()
+        fun stop()
+        fun seek(position: Int)
+    }
+}
\ No newline at end of file
Index: app/src/main/java/edu/temple/audiobookplayer/Book.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/Book.kt b/app/src/main/java/edu/temple/audiobookplayer/Book.kt
new file mode 100644
--- /dev/null	(date 1650164796344)
+++ b/app/src/main/java/edu/temple/audiobookplayer/Book.kt	(date 1650164796344)
@@ -0,0 +1,8 @@
+package edu.temple.audiobookplayer
+
+import org.json.JSONObject
+import java.io.Serializable
+
+data class Book(val id: Int, val title: String, val author: String, val duration : Int, val coverURL: String) : Serializable {
+    constructor(book: JSONObject) : this(book.getInt("id"), book.getString("title"), book.getString("author"),book.getInt("duration"), book.getString("cover_url"))
+}
Index: app/src/main/java/edu/temple/audiobookplayer/PlayingBookViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/PlayingBookViewModel.kt b/app/src/main/java/edu/temple/audiobookplayer/PlayingBookViewModel.kt
new file mode 100644
--- /dev/null	(date 1650164796401)
+++ b/app/src/main/java/edu/temple/audiobookplayer/PlayingBookViewModel.kt	(date 1650164796401)
@@ -0,0 +1,20 @@
+package edu.temple.audiobookplayer
+
+import androidx.lifecycle.LiveData
+import androidx.lifecycle.MutableLiveData
+import androidx.lifecycle.ViewModel
+
+class PlayingBookViewModel: ViewModel() {
+
+    private val book: MutableLiveData<Book> by lazy{
+        MutableLiveData()
+    }
+
+    fun getBookPlaying(): LiveData<Book> {
+        return book
+    }
+
+    fun setBookPlaying(selectedBook: Book?){
+        this.book.value = selectedBook
+    }
+}
\ No newline at end of file
Index: app/src/main/java/edu/temple/audiobookplayer/SearchActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/SearchActivity.kt b/app/src/main/java/edu/temple/audiobookplayer/SearchActivity.kt
new file mode 100644
--- /dev/null	(date 1650164796425)
+++ b/app/src/main/java/edu/temple/audiobookplayer/SearchActivity.kt	(date 1650164796425)
@@ -0,0 +1,41 @@
+package edu.temple.audiobookplayer
+
+import androidx.appcompat.app.AppCompatActivity
+import android.os.Bundle
+import com.android.volley.RequestQueue
+import com.android.volley.toolbox.Volley
+import android.content.Intent
+import android.widget.Button
+import android.widget.EditText
+import android.widget.ImageButton
+import com.android.volley.Request
+import com.android.volley.toolbox.JsonArrayRequest
+
+class SearchActivity : AppCompatActivity() {
+
+    val searchButton: ImageButton by lazy{
+        findViewById(R.id.searchButton)
+    }
+
+
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+        setContentView(R.layout.activity_search)
+        this.setFinishOnTouchOutside(false)
+        searchButton.setOnClickListener {
+            val url = "https://kamorris.com/lab/cis3515/search.php?term="+
+                    findViewById<EditText>(R.id.booksearch).text.toString()
+            Volley.newRequestQueue(this).add(
+                JsonArrayRequest(Request.Method.GET, url, null, {
+                    setResult(
+                        RESULT_OK,
+                        Intent().putExtra(
+                            BookList.BOOKLIST_KEY,
+                            BookList().apply { populateBooks(it) })
+                    )
+                    finish()
+                }, {})
+            )
+        }
+    }
+}
\ No newline at end of file
Index: app/src/main/java/edu/temple/audiobookplayer/API.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/edu/temple/audiobookplayer/API.kt b/app/src/main/java/edu/temple/audiobookplayer/API.kt
new file mode 100644
--- /dev/null	(date 1650164796435)
+++ b/app/src/main/java/edu/temple/audiobookplayer/API.kt	(date 1650164796435)
@@ -0,0 +1,9 @@
+package edu.temple.audiobookplayer
+
+class API {
+    companion object URL {
+        fun getBookDataUrl(id: Int): String {
+            return "https://kamorris.com/lab/cis3515/book.php?id=${id}"
+        }
+    }
+}
\ No newline at end of file
Index: app/src/main/res/layout-land/activity_main.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    app:layout_constraintHeight_percent=\".35\">\r\n\r\n    <androidx.fragment.app.FragmentContainerView\r\n        android:id=\"@+id/container1\"\r\n        android:layout_width=\"241dp\"\r\n        android:layout_height=\"414dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintHeight_percent=\".35\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <androidx.fragment.app.FragmentContainerView\r\n        android:id=\"@+id/container2\"\r\n        android:name=\"edu.temple.audiobookplayer.BookDetailsFragment\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/container1\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout-land/activity_main.xml b/app/src/main/res/layout-land/activity_main.xml
--- a/app/src/main/res/layout-land/activity_main.xml	(revision 750861889d93612c1df858f13164d5c6648209ea)
+++ b/app/src/main/res/layout-land/activity_main.xml	(date 1650164796561)
@@ -1,27 +1,7 @@
 <?xml version="1.0" encoding="utf-8"?>
 <androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
-    android:layout_height="match_parent"
-    app:layout_constraintHeight_percent=".35">
+    android:layout_height="match_parent">
+    <include layout="@layout/two_pane_layout" />
 
-    <androidx.fragment.app.FragmentContainerView
-        android:id="@+id/container1"
-        android:layout_width="241dp"
-        android:layout_height="414dp"
-        app:layout_constraintBottom_toBottomOf="parent"
-        app:layout_constraintHeight_percent=".35"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toTopOf="parent" />
-
-    <androidx.fragment.app.FragmentContainerView
-        android:id="@+id/container2"
-        android:name="edu.temple.audiobookplayer.BookDetailsFragment"
-        android:layout_width="0dp"
-        android:layout_height="0dp"
-        app:layout_constraintBottom_toBottomOf="parent"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintStart_toEndOf="@+id/container1"
-        app:layout_constraintTop_toTopOf="parent" />
 </androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
